sudo: required

language: c

services:
    - docker

before_install:
    - cd ../
    - rm -rf selinux-policy/policy/modules/contrib
    - git clone https://github.com/fedora-selinux/selinux-policy-contrib.git selinux-policy/policy/modules/contrib;
    - git clone https://github.com/containers/container-selinux.git
    - cp container-selinux/container.* selinux-policy/policy/modules/contrib;
    - docker pull fedora:rawhide

script:
    - docker run  -v /home/travis/build/wrabcak/:/root/build/ fedora:rawhide /bin/sh -c "dnf install -y checkpolicy policycoreutils-devel make m4 git findutils gcc ; cd /root/build/selinux-policy; make policy"
